# ğŸ¬ Automatic Media Optimization - Quick Reference

## âœ… Status: ACTIVE

Automatic optimization is **fully configured** and will run on every push to `main` or `develop` branches.

---

## ğŸš€ How It Works

### Add Media Files

```bash
# Add your files to public directories
cp photo.jpg public/images/
cp video.mp4 public/videos/

# Commit and push
git add public/
git commit -m "Add new media assets"
git push
```

### Automatic Processing

Within 2-5 minutes, GitHub Actions will:

- âœ… Detect your new files
- âœ… Optimize images â†’ WebP (40-84% smaller)
- âœ… Optimize videos â†’ WebM + MP4 (30-60% smaller)
- âœ… Generate video poster images
- âœ… Commit optimized files back
- âœ… Report savings in Actions tab

---

## ğŸ“Š What Gets Optimized

### Images

| Format      | Output     | Typical Savings |
| ----------- | ---------- | --------------- |
| PNG         | WebP       | 40-84%          |
| JPG         | WebP       | 30-50%          |
| Large files | Compressed | Auto quality    |

### Videos

| Input         | Outputs    | Quality Levels    |
| ------------- | ---------- | ----------------- |
| MP4, MOV, AVI | WebM + MP4 | 1080p, 720p, 480p |
| Any video     | Poster JPG | First frame       |

---

## ğŸ’» Using Optimized Media

### Images (Next.js)

```tsx
import Image from "next/image";

<Image
  src="/images/my-photo.jpg" // Automatically uses WebP
  alt="Description"
  width={800}
  height={600}
/>;
```

### Videos (HTML5)

```tsx
<video controls poster="/videos/my-video-poster.jpg">
  <source src="/videos/my-video.webm" type="video/webm" />
  <source src="/videos/my-video.mp4" type="video/mp4" />
</video>
```

---

## ğŸ› ï¸ Manual Commands (Optional)

```bash
# Optimize images locally
npm run optimize:images

# Optimize videos locally (requires FFmpeg)
npm run optimize:videos

# Audit images for opportunities
npm run audit:images

# Install FFmpeg in dev container
./scripts/setup-ffmpeg.sh
```

---

## ğŸ“ File Locations

```
public/
â”œâ”€â”€ images/
â”‚   â””â”€â”€ photo.jpg              # Original (you add this)
â”œâ”€â”€ images-optimized/
â”‚   â””â”€â”€ photo.webp             # Auto-generated by workflow
â”œâ”€â”€ videos/
â”‚   â””â”€â”€ video.mp4              # Original (you add this)
â””â”€â”€ videos-optimized/
    â”œâ”€â”€ video.webm             # Auto-generated WebM
    â”œâ”€â”€ video.mp4              # Auto-generated optimized MP4
    â””â”€â”€ video-poster.jpg       # Auto-generated poster
```

---

## ğŸ” Monitoring

### GitHub Actions

1. Go to repository â†’ **Actions** tab
2. Click **"Optimize Images & Videos"**
3. View optimization reports and savings

### Commit History

Look for commits by `github-actions[bot]`:

```
ğŸ¤– Auto-optimize media assets

Optimized 12 files
- Images converted to WebP/AVIF
- Videos converted to WebM/MP4
- Poster images generated
- Sizes optimized for web delivery
```

---

## âš¡ Performance Impact

### Before Optimization

- 475 KB veteran background PNG
- Large video files
- Slow page loads

### After Optimization

- 76 KB WebP (84% smaller)
- Streaming-optimized videos
- 30-40% faster LCP

---

## ğŸ¯ Best Practices

âœ… **DO:**

- Use descriptive filenames: `hero-homepage.jpg`
- Keep originals under 5MB when possible
- Add meaningful alt text
- Use Next.js Image component

âŒ **DON'T:**

- Upload massive files (>100MB videos)
- Use generic names: `img1.jpg`
- Commit to feature branches (no auto-optimization there)

---

## ğŸ› Troubleshooting

### Workflow didn't run?

- Check files are in `public/images/` or `public/videos/`
- Ensure push is to `main` or `develop` branch
- Verify supported formats: png, jpg, mp4, mov, webm, avi

### Need to skip optimization?

```bash
git commit -m "Add media [skip ci]"
```

---

## ğŸ“š Full Documentation

See [automatic-media-optimization.md](./automatic-media-optimization.md)

---

**Setup Date:** 2025-12-26  
**Status:** âœ… Production Ready  
**Maintained By:** GitHub Actions (automated)
